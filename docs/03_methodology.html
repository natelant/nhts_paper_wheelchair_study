<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Methodology</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">WAV</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Introduction</a>
</li>
<li>
  <a href="literature.html">Literature Review</a>
</li>
<li>
  <a href="03_methodology.html">Methodology</a>
</li>
<li>
  <a href="test_tours_and_employment.html">Tour Attributes</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Methodology</h1>

</div>


<p>The NHTS asks respondents if they have “a temporary or permanent condition or handicap that makes it difficult to travel outside of the home.” If they respond yes, the NHTS asks follow-up questions about the mobility devices they use, such as canes or wheelchairs. It also asks follow-up questions about how the condition affects their travel—for example, by limiting their driving to daytime. For the rest of this report, “people with disabilities” refers to people who report having travel-limiting disabilities <span class="citation">(Brumbaugh 2018)</span>.</p>
<p>In this study, the population was divided into three groups: Disabled individuals who reported using a wheelchair (either mechanical, manual or both) or scooter are labeled <em>“Wheelchair”</em>; disabled individuals (excluding those who use a wheelchair or scooter) are labeled <em>“Disabled”</em>; and the general population who did not report a “travel-limiting” disability are labeled <em>“Abled”</em>.</p>
<pre class="r"><code>knitr::opts_chunk$set(echo = TRUE)

# install.packages(&quot;devtools&quot;)
# devtools::install_github(&quot;byu-transpolab/nhts2017&quot;)
library(nhts2017)
library(tidyverse)
library(scales)
library(pander)

# for help understanding the kableExtra library 
# (https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html)
# there may be some issues with this table going to html vs pdf and latex
library(kableExtra)
library(Stack)

source(&quot;R/functions.R&quot;)</code></pre>
<table style="width:69%;">
<caption>Counts and Distribution of Population</caption>
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="18%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Ability</th>
<th align="center">Survey</th>
<th align="center">Population</th>
<th align="center">Distribution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Abled</td>
<td align="center">236051</td>
<td align="center">271384034</td>
<td align="center">91.4%</td>
</tr>
<tr class="even">
<td align="center">Disabled</td>
<td align="center">20801</td>
<td align="center">21048869</td>
<td align="center">7.1%</td>
</tr>
<tr class="odd">
<td align="center">Wheelchair</td>
<td align="center">4335</td>
<td align="center">4354116</td>
<td align="center">1.5%</td>
</tr>
</tbody>
</table>
<div id="data-and-data-description" class="section level2">
<h2>Data and Data Description</h2>
<p>The table below considers variables that are included in the model, as they are probable perameters in influencing trip count by purpose. The table displays the population distribution for each ability group, for example, 47.1% of the “Wheelchair” population is in the Low income group. Then that raises the question, is number of trips more infuenced by income or by ability?</p>
<pre class="r"><code># This table will show all the variables useful for the regression model and show the distribution for each 
# of the populations: Abled, Disabled, Wheelchair

# the final.rds data has the full grid with all of the trip purpose tally per person (in addition to the 
# entire persons attribute file)
my_nhts &lt;- read_rds(&quot;data/nhts_data.rds&quot;)
my_persons &lt;- read_rds(&quot;data/persons.rds&quot;)

# use the distribution function built for this project to construct the distribution tables
age &lt;- distributions(my_persons, Age)
income.actual &lt;- distributions(my_persons, hhfaminc)
income &lt;- distributions(my_persons, Income)
work &lt;- distributions(my_persons, Worker)
mode &lt;- distributions(my_nhts, Mode)
msa &lt;- distributions(my_persons, pop_size)
healthy &lt;- distributions(my_persons, health)
       


# now the stacking part. only one at a time please :)
Stack(age, income) %&gt;% 
  Stack(work) %&gt;%
  Stack(mode) %&gt;%
  Stack(msa) %&gt;%
  Stack(healthy) %&gt;%
  
  
  # pipe into the kable function
  kable(caption = &quot;2017 NHTS Data Distribution&quot;) %&gt;%
  kable_styling(&quot;striped&quot;, full_width = F) %&gt;%
  # Specify which row numbers are grouped together (i.e. from 1, to 10)
  pack_rows(&quot;Age&quot;, 1, 10) %&gt;%
  pack_rows(&quot;Income Group&quot;, 11, 14) %&gt;%
  pack_rows(&quot;Worker Status&quot;, 15, 17) %&gt;%
  pack_rows(&quot;Mode Choice&quot;, 18, 26) %&gt;%
  pack_rows(&quot;MSA Population Size&quot;, 27, 32) %&gt;%
  pack_rows(&quot;Personal Opinion of Health&quot;, 33, 39)</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
2017 NHTS Data Distribution
</caption>
<thead>
<tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:left;">
Abled
</th>
<th style="text-align:left;">
Disabled
</th>
<th style="text-align:left;">
Wheelchair
</th>
</tr>
</thead>
<tbody>
<tr grouplength="10">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Age</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
0 - 10
</td>
<td style="text-align:left;">
7.3%
</td>
<td style="text-align:left;">
1.0%
</td>
<td style="text-align:left;">
1.0%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
10 - 20
</td>
<td style="text-align:left;">
15.2%
</td>
<td style="text-align:left;">
3.9%
</td>
<td style="text-align:left;">
1.6%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
20 - 30
</td>
<td style="text-align:left;">
14.5%
</td>
<td style="text-align:left;">
6.6%
</td>
<td style="text-align:left;">
4.4%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
30 - 40
</td>
<td style="text-align:left;">
15.7%
</td>
<td style="text-align:left;">
6.0%
</td>
<td style="text-align:left;">
4.2%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
40 - 50
</td>
<td style="text-align:left;">
13.5%
</td>
<td style="text-align:left;">
9.2%
</td>
<td style="text-align:left;">
5.3%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
50 - 60
</td>
<td style="text-align:left;">
14.0%
</td>
<td style="text-align:left;">
20.0%
</td>
<td style="text-align:left;">
13.0%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
60 - 70
</td>
<td style="text-align:left;">
12.1%
</td>
<td style="text-align:left;">
23.7%
</td>
<td style="text-align:left;">
25.4%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
70 - 80
</td>
<td style="text-align:left;">
5.7%
</td>
<td style="text-align:left;">
15.7%
</td>
<td style="text-align:left;">
21.8%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
80 - 90
</td>
<td style="text-align:left;">
1.7%
</td>
<td style="text-align:left;">
10.4%
</td>
<td style="text-align:left;">
14.5%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
90 - 100
</td>
<td style="text-align:left;">
0.3%
</td>
<td style="text-align:left;">
3.5%
</td>
<td style="text-align:left;">
8.8%
</td>
</tr>
<tr grouplength="4">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Income Group</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Low
</td>
<td style="text-align:left;">
17.1%
</td>
<td style="text-align:left;">
45.2%
</td>
<td style="text-align:left;">
47.1%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Mid-Low
</td>
<td style="text-align:left;">
20.1%
</td>
<td style="text-align:left;">
25.3%
</td>
<td style="text-align:left;">
23.5%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Mid-High
</td>
<td style="text-align:left;">
30.8%
</td>
<td style="text-align:left;">
19.8%
</td>
<td style="text-align:left;">
17.6%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
High
</td>
<td style="text-align:left;">
32.0%
</td>
<td style="text-align:left;">
9.7%
</td>
<td style="text-align:left;">
11.7%
</td>
</tr>
<tr grouplength="3">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Worker Status</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Full-Time
</td>
<td style="text-align:left;">
42.0%
</td>
<td style="text-align:left;">
6.2%
</td>
<td style="text-align:left;">
3.0%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Part-Time
</td>
<td style="text-align:left;">
11.8%
</td>
<td style="text-align:left;">
6.3%
</td>
<td style="text-align:left;">
1.8%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Unemployed
</td>
<td style="text-align:left;">
46.2%
</td>
<td style="text-align:left;">
87.5%
</td>
<td style="text-align:left;">
95.2%
</td>
</tr>
<tr grouplength="9">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Mode Choice</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Car (Driver)
</td>
<td style="text-align:left;">
61.6%
</td>
<td style="text-align:left;">
45.6%
</td>
<td style="text-align:left;">
35.2%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Car (Passenger)
</td>
<td style="text-align:left;">
10.1%
</td>
<td style="text-align:left;">
15.7%
</td>
<td style="text-align:left;">
17.4%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Van (Driver)
</td>
<td style="text-align:left;">
4.2%
</td>
<td style="text-align:left;">
3.2%
</td>
<td style="text-align:left;">
4.2%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Van (Passenger)
</td>
<td style="text-align:left;">
2.9%
</td>
<td style="text-align:left;">
3.3%
</td>
<td style="text-align:left;">
4.9%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Walk
</td>
<td style="text-align:left;">
10.0%
</td>
<td style="text-align:left;">
11.5%
</td>
<td style="text-align:left;">
4.4%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Local Transit
</td>
<td style="text-align:left;">
2.1%
</td>
<td style="text-align:left;">
3.6%
</td>
<td style="text-align:left;">
3.3%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Paratransit
</td>
<td style="text-align:left;">
0.0%
</td>
<td style="text-align:left;">
0.9%
</td>
<td style="text-align:left;">
2.3%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Taxi (Including Uber/Lyft)
</td>
<td style="text-align:left;">
0.5%
</td>
<td style="text-align:left;">
0.6%
</td>
<td style="text-align:left;">
1.2%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Other
</td>
<td style="text-align:left;">
8.5%
</td>
<td style="text-align:left;">
15.5%
</td>
<td style="text-align:left;">
27.0%
</td>
</tr>
<tr grouplength="6">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>MSA Population Size</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Less than 250,000
</td>
<td style="text-align:left;">
9.0%
</td>
<td style="text-align:left;">
9.2%
</td>
<td style="text-align:left;">
9.2%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
250,000 - 499,999
</td>
<td style="text-align:left;">
9.0%
</td>
<td style="text-align:left;">
8.9%
</td>
<td style="text-align:left;">
6.4%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
500,000 - 999,999
</td>
<td style="text-align:left;">
11.9%
</td>
<td style="text-align:left;">
11.8%
</td>
<td style="text-align:left;">
11.7%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
1,000,000 - 2,999,999
</td>
<td style="text-align:left;">
20.4%
</td>
<td style="text-align:left;">
21.2%
</td>
<td style="text-align:left;">
21.9%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
More than 3,000,000
</td>
<td style="text-align:left;">
35.6%
</td>
<td style="text-align:left;">
31.5%
</td>
<td style="text-align:left;">
30.5%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Not in an MSA
</td>
<td style="text-align:left;">
14.1%
</td>
<td style="text-align:left;">
17.4%
</td>
<td style="text-align:left;">
20.4%
</td>
</tr>
<tr grouplength="7">
<td colspan="4" style="border-bottom: 1px solid;">
<strong>Personal Opinion of Health</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
I prefer not to answer
</td>
<td style="text-align:left;">
0.1%
</td>
<td style="text-align:left;">
0.0%
</td>
<td style="text-align:left;">
0.0%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
I don’t know
</td>
<td style="text-align:left;">
0.0%
</td>
<td style="text-align:left;">
0.1%
</td>
<td style="text-align:left;">
0.1%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Excellent
</td>
<td style="text-align:left;">
34.8%
</td>
<td style="text-align:left;">
3.7%
</td>
<td style="text-align:left;">
2.6%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Very good
</td>
<td style="text-align:left;">
37.1%
</td>
<td style="text-align:left;">
11.5%
</td>
<td style="text-align:left;">
7.8%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Good
</td>
<td style="text-align:left;">
22.4%
</td>
<td style="text-align:left;">
30.9%
</td>
<td style="text-align:left;">
21.1%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Fair
</td>
<td style="text-align:left;">
5.1%
</td>
<td style="text-align:left;">
36.5%
</td>
<td style="text-align:left;">
35.6%
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Poor
</td>
<td style="text-align:left;">
0.5%
</td>
<td style="text-align:left;">
17.4%
</td>
<td style="text-align:left;">
32.8%
</td>
</tr>
</tbody>
</table>
</div>
<div id="poisson-regression-of-daily-trips" class="section level2">
<h2>Poisson Regression of Daily Trips</h2>
<pre class="r"><code># Organize the data so that trips can be counted and zero trips can be accounted for

#option to use just person attribute
persons &lt;- read_rds(&quot;data/persons.rds&quot;)

# the grid makes it possible to count zero trips
grid &lt;- expand_grid(
  # uses only the unique hhpersonids found in the new_trips data
  hhpersonid = unique(my_nhts$hhpersonid), 
  # uses only HBO, HBW, HBSOCREC, NHB, and HBSOP
  trippurp = unique(my_nhts$trippurp)
) %&gt;%
  
filter(trippurp != &quot;-9&quot;) %&gt;%
  
  # now join it with the trip purpose counts
left_join(
    my_nhts %&gt;%
      group_by(hhpersonid, trippurp) %&gt;%
      # count the trips by purpose for each person
      tally() %&gt;%
      mutate(n = ifelse(n &gt; 10, 10, n)
         ),
    by = c(&quot;hhpersonid&quot;, &quot;trippurp&quot;)
) %&gt;%
  
# change the NAs to 0s
mutate(n = ifelse(is.na(n), 0, n)) %&gt;%
             
# i need to join this with persons information then I can perform the regression

# From this point there are attributes associated with each trip (length, mode).
# so if there are trips taken then n is repeated so that each trip can have specific 
# attribute data attached.
# left_join(my_nhts)
  
left_join(persons)

# note that when joined with persons you cant use variables such as trip length or mode</code></pre>
<pre class="r"><code>fit.0 &lt;- glm(n ~ trippurp + Ability + r_age + Income + Worker, family = &quot;poisson&quot;, data = grid)</code></pre>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-Brumbaugh2018">
<p>Brumbaugh, Stephen. 2018. “Issue BrIef Travel Patterns of American Adults with Disabilities.” US Department of Transportation. <a href="https://www.bts.gov/sites/bts.dot.gov/files/docs/explore-topics-and-geography/topics/passenger-travel/222466/travel-patterns-american-adults-disabilities-11-26-19.pdf">https://www.bts.gov/sites/bts.dot.gov/files/docs/explore-topics-and-geography/topics/passenger-travel/222466/travel-patterns-american-adults-disabilities-11-26-19.pdf</a>.</p>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
